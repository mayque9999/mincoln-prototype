<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>åæ ¹çƒ¤è‚‰ï½œMobile-first æµç¨‹ç¤ºæ„</title>
  <meta name="description" content="Mobile-first æµç¨‹ç¤ºæ„ï¼šé¦–é åˆ†æµ + å…©æ¢LP + å…¨å•†å“å…¥å£(å«å–®é») + FAQ + è³¼ç‰©è»Š/çµå¸³ï¼ˆä»£çƒ¤ä¸é€²è³¼ç‰©è»Šï¼Œæ”¹ç”¨LINEå…ˆç¢ºèªï¼‰" />
  <style>
    :root{
      --bg:#f4f4f4; --card:#fff; --ink:#111; --muted:#666; --line:#ddd;
      --cta:#111; --ctaInk:#fff; --soft:#f0f0f0;
      --radius:16px;
      --tap:44px;
      --max:420px;
      --shadow: 0 6px 18px rgba(0,0,0,.08);
      --shadow2: 0 2px 10px rgba(0,0,0,.06);
    }
    *{box-sizing:border-box}
    body{margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--ink);}
    a{color:inherit; text-decoration:none}
    button{font:inherit}
    .app{max-width:var(--max); margin:0 auto; min-height:100vh; background:var(--bg);}

    /* Header */
    .header{
      position:sticky; top:0; z-index:20;
      background:rgba(244,244,244,.92);
      backdrop-filter: blur(8px);
      border-bottom:1px solid var(--line);
    }
    .headerRow{
      height:56px;
      display:grid;
      grid-template-columns: var(--tap) 1fr calc(var(--tap)*2);
      align-items:center;
      padding:0 10px;
      gap:8px;
    }
    .iconBtn{
      height:var(--tap); width:var(--tap);
      border:1px solid var(--line);
      background:#fff;
      border-radius:12px;
      display:flex; align-items:center; justify-content:center;
      box-shadow: var(--shadow2);
      cursor:pointer;
    }

    /* subtle LINE button (shows only on onsite flow) */
    .lineBtn{
      height:var(--tap); width:var(--tap);
      border:1px solid var(--line);
      background:#fff;
      border-radius:12px;
      display:flex; align-items:center; justify-content:center;
      box-shadow: var(--shadow2);
      cursor:pointer;
      font-size:12px;
      font-weight:800;
      letter-spacing:.2px;
    }

    .rightIcons{display:flex; justify-content:flex-end; gap:8px;}
    .logo{
      text-align:center; font-weight:700; letter-spacing:.2px;
      padding:8px 10px;
      border-radius:12px;
      cursor:pointer;
    }

    /* Layout */
    .page{padding:14px 12px 20px;}
    .h1{font-size:22px; font-weight:800; line-height:1.2; margin:6px 0 8px;}
    .sub{color:var(--muted); font-size:13px; line-height:1.4; margin:0 0 12px;}
    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow: var(--shadow);
    }
    .section{margin:12px 0;}
    .imgPh{
      height:140px;
      background:linear-gradient(135deg,#e9e9e9,#f7f7f7);
      border-bottom:1px solid var(--line);
      border-top-left-radius:var(--radius);
      border-top-right-radius:var(--radius);
      display:flex; align-items:center; justify-content:center;
      color:#888; font-weight:700;
    }
    .pad{padding:12px;}
    .chips{display:flex; gap:8px; flex-wrap:wrap;}
    .chip{
      background:var(--soft);
      border:1px solid var(--line);
      color:#333;
      padding:8px 10px;
      border-radius:999px;
      font-size:12px;
    }
    .btn{
      height:var(--tap);
      padding:0 14px;
      border-radius:14px;
      border:1px solid var(--line);
      background:#fff;
      cursor:pointer;
      display:inline-flex; align-items:center; justify-content:center;
      gap:8px;
      min-width:120px;
    }
    .btnPrimary{
      background:var(--cta);
      color:var(--ctaInk);
      border-color:var(--cta);
    }
    .btnWide{width:100%;}
    .btnRow{display:flex; gap:10px; align-items:center;}
    .muted{color:var(--muted); font-size:12px;}
    .kicker{font-size:12px; color:#444; font-weight:700; letter-spacing:.2px;}

    /* Routing cards */
    .routeCard .pad{display:flex; flex-direction:column; gap:10px;}
    .routeTitle{font-size:16px; font-weight:800; margin:0;}

    /* Set cards */
    .setCard .pad{display:flex; flex-direction:column; gap:10px;}
    .setTop{display:flex; justify-content:space-between; align-items:flex-start; gap:10px;}
    .setName{font-size:15px; font-weight:800; margin:0;}
    .price{font-weight:800;}
    ul{margin:0; padding-left:18px;}
    li{margin:6px 0; font-size:13px; color:#333;}

    /* Accordion */
    details{
      border:1px solid var(--line);
      border-radius:14px;
      background:#fff;
      padding:10px 12px;
      box-shadow: var(--shadow2);
    }
    details + details{margin-top:10px;}
    summary{cursor:pointer; font-weight:800; list-style:none;}
    summary::-webkit-details-marker{display:none;}
    .accBody{margin-top:8px; color:var(--muted); font-size:13px; line-height:1.4;}

    /* Drawer + modal */
    .backdrop{
      position:fixed; inset:0; background:rgba(0,0,0,.35);
      display:none; z-index:40;
    }
    .drawer{
      position:fixed; top:0; left:0; height:100vh; width:min(320px, 86vw);
      background:#fff; border-right:1px solid var(--line); box-shadow:var(--shadow);
      transform:translateX(-102%); transition:.2s ease; z-index:50;
      padding:12px;
    }
    .drawer.open{transform:translateX(0);}
    .backdrop.open{display:block;}
    .navItem{
      height:var(--tap); display:flex; align-items:center;
      border:1px solid var(--line); border-radius:14px;
      padding:0 12px; margin:10px 0; background:#fff; cursor:pointer;
    }
    .navItem small{color:var(--muted); margin-left:auto;}
    .modal{
      position:fixed; left:50%; top:10%;
      transform:translateX(-50%);
      width:min(420px, 92vw);
      background:#fff; border:1px solid var(--line); border-radius:18px;
      box-shadow:var(--shadow); z-index:60; padding:12px;
      display:none;
    }
    .modal.open{display:block;}
    .field{display:flex; gap:10px; margin:10px 0;}
    input{
      width:100%; height:44px; border-radius:14px; border:1px solid var(--line);
      padding:0 12px; font-size:14px; outline:none;
    }
    .list{
      margin-top:8px;
      border-top:1px solid var(--line);
      padding-top:8px;
    }
    .result{
      padding:10px 10px;
      border:1px solid var(--line);
      border-radius:14px;
      margin:8px 0;
      cursor:pointer;
      background:#fff;
    }

    /* Tables / small */
    .hr{height:1px; background:var(--line); margin:10px 0;}
    .mini{font-size:12px; color:var(--muted);}
    .twoCol{display:grid; grid-template-columns:1fr 1fr; gap:10px;}
    .note{font-size:12px; color:#444; background:var(--soft); border:1px solid var(--line); border-radius:14px; padding:10px;}

    /* ---- Home hierarchy (hero + light) ---- */
    .routeCard.hero .imgPh{height:170px;}
    .routeCard.hero .routeTitle{font-size:18px;}
    .routeCard.hero .muted{font-size:13px;}
    .routeCard.hero .btn{height:48px; border-radius:16px;}
    .routeCard.light{box-shadow: var(--shadow2);}
    .routeCard.light .imgPh{height:110px;}

    /* ---- Addon quick row ---- */
    .addonGrid{display:flex; flex-direction:column; gap:10px;}
    .addonItem{
      background:#fff; border:1px solid var(--line);
      border-radius:16px; box-shadow: var(--shadow2);
      padding:12px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .addonName{font-weight:900;}
    .addonMeta{font-size:12px; color:var(--muted); margin-top:2px;}
    .addonRight{display:flex; align-items:center; gap:10px;}
    .addonPrice{font-weight:900; white-space:nowrap;}
    .addonAdd{
      height:40px; padding:0 12px; border-radius:999px;
      border:1px solid var(--line); background:#fff; cursor:pointer;
    }
    .addonAdd.primary{background:#111; color:#fff; border-color:#111;}
  </style>
</head>
<body>
  <div class="app">
    <div class="header">
      <div class="headerRow">
        <button class="iconBtn" id="btnMenu" aria-label="é¸å–®">â˜°</button>
        <div class="logo" id="btnHome" title="å›é¦–é ">åæ ¹çƒ¤è‚‰</div>
        <div class="rightIcons">
          <button class="iconBtn" id="btnSearch" aria-label="æœå°‹">ğŸ”</button>
          <button class="lineBtn" id="btnLine" aria-label="LINE æ”¯æ´" title="LINE æ”¯æ´" style="display:none;">LINE</button>
          <button class="iconBtn" id="btnCart" aria-label="è³¼ç‰©è»Š">ğŸ›’</button>
        </div>
      </div>
    </div>

    <main id="appRoot"></main>

    <!-- Drawer -->
    <div class="backdrop" id="backdrop"></div>
    <aside class="drawer" id="drawer">
      <div class="kicker">å…¨ç«™å°è¦½</div>
      <div class="navItem" data-go="#/home">é¦–é  <small>åˆ†æµ</small></div>
      <div class="navItem" data-go="#/buy-yourself">æˆ‘è‡ªå·±çƒ¤ <small>LP</small></div>
      <div class="navItem" data-go="#/onsite-service">ä¾†å¹«æˆ‘çƒ¤ <small>LP</small></div>
      <div class="navItem" data-go="#/shop">ç€è¦½å…¨å•†å“ <small>å«å–®é»</small></div>
      <div class="navItem" data-go="#/faq">å¸¸è¦‹å•é¡Œ <small>Page</small></div>
      <div class="navItem" data-go="#/about">é—œæ–¼æˆ‘å€‘ <small>ä¿¡ä»»</small></div>
      <div class="navItem" data-go="#/contact">è¯çµ¡æ–¹å¼ <small>è³‡è¨Š</small></div>
      <div class="navItem" id="drawerClose">é—œé–‰ <small>âœ•</small></div>
    </aside>

    <!-- Search modal -->
    <div class="modal" id="searchModal" role="dialog" aria-modal="true" aria-label="æœå°‹">
      <div class="kicker">æœå°‹</div>
      <div class="field">
        <input id="searchInput" placeholder="æœå°‹æ–¹æ¡ˆ / å–®é» / æœå‹™..." />
        <button class="btn" id="searchClose">é—œé–‰</button>
      </div>
      <div class="mini">æç¤ºï¼šè©¦è©¦ã€Œå…¥é–€ã€ã€Œæ´¾å°ã€ã€Œé¦™è…¸ã€ã€Œç‰ç±³ã€ã€Œä»£çƒ¤ã€ã€Œå…¨å•†å“ã€ã€‚</div>
      <div class="list" id="searchResults"></div>
    </div>

    <div class="backdrop" id="modalBackdrop"></div>
  </div>

<script>
  // ---------- Simple state ----------
  const state = {
    cart: [], // {id, name, price, qty, type}
    sets: [
      { id:"set-starter", name:"å…¥é–€æ¬¾", best:"ç¬¬ä¸€æ¬¡ / æœ€ç©©", price: 1890, highlights:["å›ºå®šçµ„åˆ", "ä¸è¸©é›·", "å‚™æ–™å¿«"], type:"buy" },
      { id:"set-party", name:"æ´¾å°æ¬¾", best:"æœ‹å‹ / ç”Ÿæ—¥", price: 2690, highlights:["æ›´è±å¯Œ", "çœ‹èµ·ä¾†æ¾æ¹ƒ", "å£å‘³å¹³è¡¡"], type:"buy" },
      { id:"set-king", name:"è±ªè¯æ¬¾", best:"å¤šäºº / é«˜ç´šæ„Ÿ", price: 3490, highlights:["ä»½é‡æœ€æœ‰æ„Ÿ", "å¯åŠ è³¼å‡ç´š", "æ‹›å¾…ä¸å¤±ç¦®"], type:"buy" },
    ],
    services: [
      { id:"svc-800", name:"ä»£çƒ¤æ–¹æ¡ˆ 800", best:"åŸºæœ¬æµç¨‹å”åŠ©", price: 16000, highlights:["åˆ°åºœä»£çƒ¤", "åŸºæœ¬æ§å ´", "æ¨™æº–æ”¶å°¾"], type:"service" },
      { id:"svc-1000", name:"ä»£çƒ¤æ–¹æ¡ˆ 1000", best:"ä¸»åŠ›æ¨è–¦", price: 20000, highlights:["ç¯€å¥æ›´é †", "æ§å ´æ›´ç©©", "ä¸»æªæ›´è¼•é¬†"], type:"service" },
      { id:"svc-1200", name:"ä»£çƒ¤æ–¹æ¡ˆ 1200", best:"å…¨åŒ…é«˜éš", price: 24000, highlights:["å…¨ç¨‹å¸¶æµç¨‹", "é«”é©—æœ€å¥½", "æ”¶å°¾æœ€å®Œæ•´"], type:"service" },
    ],
    addons: [
      { id:"add-sausage", name:"é£›é­šåµé¦™è…¸ï¼ˆ8æ¢ï¼‰", best:"åŠ è³¼ç†±é–€", price: 220, highlights:["ä¸‹é…’å¿…å‚™", "çƒ¤èµ·ä¾†å¾ˆç©©", "æ­é…æ–¹æ¡ˆæ›´å®Œæ•´"], type:"addon" },
      { id:"add-corn", name:"ç”œç‰ç±³ï¼ˆåˆ‡æ®µï¼‰", best:"å¤§äººå°å­©éƒ½æ„›", price: 120, highlights:["ä¸ç”¨è™•ç†", "è£œå£æ„Ÿ", "æ”¶å°¾å¾ˆå‰›å¥½"], type:"addon" },
      { id:"add-shrimp", name:"ç†Ÿç™½è¦ï¼ˆåŠ è³¼åŒ…ï¼‰", best:"æƒ³çœ‹èµ·ä¾†æ›´æ¾æ¹ƒ", price: 280, highlights:["ä¸Šæ¡Œæœ‰æ„Ÿ", "æ›´å¥½æŒæ¡", "ä¸æ€•é€€å†°è®Šè‰²"], type:"addon" },
    ],
    searchIndex: []
  };

  // Replace with your real LINE OA URL
  const LINE_URL = "https://line.me/R/ti/p/@YOUR_LINE_ID";

  function money(n){ return "NT$ " + n.toLocaleString("en-US"); }

  function addToCart(item){
    // ä»£çƒ¤ä¸é€²è³¼ç‰©è»Šï¼ˆåªçœ‹å…§å®¹ + LINE ç¢ºèªï¼‰
    if(item.type === "service"){
      toast("ä»£çƒ¤è«‹å…ˆç”¨ LINE ç¢ºèª");
      window.open(LINE_URL, "_blank");
      return;
    }
    const found = state.cart.find(x => x.id === item.id);
    if(found) found.qty += 1;
    else state.cart.push({ id:item.id, name:item.name, price:item.price, qty:1, type:item.type });
    toast(`å·²åŠ å…¥ï¼š${item.name}`);
    render();
  }

  function updateQty(id, delta){
    const it = state.cart.find(x => x.id === id);
    if(!it) return;
    it.qty += delta;
    if(it.qty <= 0) state.cart = state.cart.filter(x=>x.id!==id);
    render();
  }

  function cartTotal(){
    return state.cart.reduce((s,x)=> s + x.price*x.qty, 0);
  }

  // ---------- Tiny toast ----------
  let toastTimer = null;
  function toast(msg){
    clearTimeout(toastTimer);
    const el = document.createElement("div");
    el.textContent = msg;
    el.style.position="fixed";
    el.style.left="50%"; el.style.bottom="18px"; el.style.transform="translateX(-50%)";
    el.style.background="#111"; el.style.color="#fff";
    el.style.padding="10px 14px"; el.style.borderRadius="999px";
    el.style.fontSize="13px"; el.style.boxShadow="0 10px 30px rgba(0,0,0,.25)";
    el.style.zIndex="80";
    document.body.appendChild(el);
    toastTimer = setTimeout(()=> el.remove(), 1200);
  }

  // ---------- Router ----------
  const routes = {
    "/home": pageHome,
    "/buy-yourself": pageBuyYourself,
    "/onsite-service": pageOnsite,
    "/shop": pageShop,
    "/faq": pageFAQ,
    "/cart": pageCart,
    "/checkout": pageCheckout,
    "/about": pageAbout,
    "/contact": pageContact,
    "/product/:id": pageProduct,
  };

  function parseRoute(){
    const hash = location.hash.replace("#","") || "/home";
    if(hash.startsWith("/product/")) return { path:"/product/:id", params:{id: hash.split("/")[2] || ""} };
    return { path: hash, params:{} };
  }

  function go(path){
    location.hash = path;
  }

  // ---------- Render shell ----------
  const root = document.getElementById("appRoot");

  // Header buttons
  const btnMenu = document.getElementById("btnMenu");
  const btnHome = document.getElementById("btnHome");
  const btnSearch = document.getElementById("btnSearch");
  const btnLine = document.getElementById("btnLine");
  const btnCart = document.getElementById("btnCart");
  const drawer = document.getElementById("drawer");
  const backdrop = document.getElementById("backdrop");

  btnLine.onclick = ()=> window.open(LINE_URL, "_blank");

  function render(){
    const { path, params } = parseRoute();
    const pageFn = routes[path] || pageHome;
    root.innerHTML = "";

    const isOnsiteLP = path === "/onsite-service";
    const isOnsiteProduct = (path === "/product/:id") && state.services.some(s => s.id === params.id);
    btnLine.style.display = (isOnsiteLP || isOnsiteProduct) ? "flex" : "none";

    pageFn(root, params);
    syncCartBadge();
  }

  // ---------- Pages ----------
  function pageHome(el){
    const wrap = document.createElement("div");
    wrap.className="page";

    wrap.innerHTML = `
      <div class="h1">çƒ¤è‚‰é€™ä»¶äº‹ï¼Œäº¤çµ¦æˆ‘å€‘å°±å¥½</div>
      <div class="sub">é£Ÿææ•´çµ„é…å¥½ï¼Œè‡ªå·±çƒ¤æˆ–è«‹äººä¾†çƒ¤éƒ½è¡Œ</div>

      <div class="section card routeCard hero">
        <div class="imgPh">æƒ…å¢ƒåœ–</div>
        <div class="pad">
          <div class="routeTitle">ç€è¦½å…¨å•†å“</div>
          <div class="muted">æ–¹æ¡ˆï¼‹å–®é»éƒ½åœ¨é€™è£¡ï¼ˆç›´æ¥é¸è³¼ï¼‰</div>
          <div class="btnRow">
            <button class="btn btnPrimary btnWide" id="goShop">ç›´æ¥é€²å»é¸è³¼</button>
          </div>
        </div>
      </div>

      <div class="section card routeCard light">
        <div class="imgPh">æƒ…å¢ƒåœ–</div>
        <div class="pad">
          <div class="routeTitle">æˆ‘è‡ªå·±çƒ¤</div>
          <div class="muted">å…ˆçœ‹æ¨è–¦æ–¹æ¡ˆï¼ˆå» LPï¼‰</div>
          <div class="btnRow">
            <button class="btn btnPrimary btnWide" id="goBuy">çœ‹æ¨è–¦æ–¹æ¡ˆ</button>
          </div>
        </div>
      </div>

      <div class="section card routeCard light">
        <div class="imgPh">æƒ…å¢ƒåœ–</div>
        <div class="pad">
          <div class="routeTitle">ä¾†å¹«æˆ‘çƒ¤</div>
          <div class="muted">ä»£çƒ¤å…ˆç”¨ LINE ç¢ºèªæª”æœŸï¼å ´åœ°</div>
          <div class="btnRow">
            <button class="btn btnPrimary btnWide" id="goOnsiteLine">ç”¨ LINE å¿«é€Ÿç¢ºèª</button>
          </div>
          <div class="mini">æƒ³å…ˆçœ‹æ–¹æ¡ˆå…§å®¹ï¼šå·¦ä¸Šè§’é¸å–® â†’ ä¾†å¹«æˆ‘çƒ¤</div>
        </div>
      </div>

      <div class="section">
        <div class="chips">
          <div class="chip">å›ºå®šçµ„åˆä¸è¸©é›·</div>
          <div class="chip">å–®é»åŠ è³¼å¾ˆç›´è¦º</div>
          <div class="chip">FAQ å…ˆè‡ªåŠ©è§£æƒ‘</div>
        </div>
      </div>

      <div class="section">
        <details open>
          <summary>å¸¸è¦‹å•é¡Œï¼ˆç²¾ç°¡ï¼‰</summary>
          <div class="accBody">å…ˆæ”¾ 3â€“5 å€‹æœ€å¸¸è¦‹çš„å•é¡Œï¼Œå°å»å®Œæ•´ FAQã€‚</div>
          <div class="hr"></div>
          <button class="btn btnWide" id="goFaq">æŸ¥çœ‹å®Œæ•´ FAQ</button>
        </details>
      </div>
    `;

    el.appendChild(wrap);

    wrap.querySelector("#goBuy").onclick = ()=>go("/buy-yourself");
    wrap.querySelector("#goOnsiteLine").onclick = ()=> window.open(LINE_URL, "_blank");
    wrap.querySelector("#goShop").onclick = ()=>go("/shop");
    wrap.querySelector("#goFaq").onclick = ()=>go("/faq");
  }

  function pageBuyYourself(el){
    const wrap = document.createElement("div");
    wrap.className="page";
    wrap.innerHTML = `
      <div class="card">
        <div class="imgPh">ä¸»è¦–è¦º</div>
        <div class="pad">
          <div class="h1" style="margin:0 0 6px;">æˆ‘è‡ªå·±çƒ¤ï½œæ‡¶äººä¹Ÿèƒ½æˆåŠŸ</div>
          <div class="sub" style="margin:0;">ä¸éœ€è¦ç ”ç©¶æ€éº¼é…ï¼Œç…§è‘—åšå°±å¥½</div>
        </div>
      </div>

      <div class="section card">
        <div class="pad">
          <div class="kicker">æˆ‘çŸ¥é“æˆ‘è¦ä»€éº¼</div>
          <div class="sub" style="margin:6px 0 10px;">æƒ³ç›´æ¥æŒ‘ï¼Ÿå…¨å•†å“ï¼ˆå«å–®é»ï¼‰éƒ½åœ¨é€™è£¡ã€‚</div>
          <button class="btn btnPrimary btnWide" id="goShopFromBuy">ç€è¦½å…¨å•†å“</button>
        </div>
      </div>

      <div class="section">
        <div class="kicker">æ¨è–¦æ–¹æ¡ˆ</div>
        <div id="setList"></div>
      </div>

      <div class="section card">
        <div class="pad">
          <div class="kicker">å–®é»åŠ è³¼ï¼ˆå¯é¸ï¼‰</div>
          <div class="mini" style="margin-top:6px;">ç¼ºä»€éº¼è£œä»€éº¼ï¼Œç›´æ¥åŠ å°±å¥½ã€‚</div>
          <div id="addonQuick" style="margin-top:10px;"></div>
        </div>
      </div>

      <div class="section card">
        <div class="pad">
          <div class="kicker">é–‹ç®±é †åº</div>
          <div class="twoCol" style="margin-top:10px;">
            <div class="note"><b>Step 1</b><br/>å…ˆçƒ¤ä¸å®¹æ˜“å¤±æ‰‹çš„ï¼ˆç¤ºæ„ï¼‰</div>
            <div class="note"><b>Step 2</b><br/>ä¸»èœä¸Šå ´ï¼ˆç¤ºæ„ï¼‰</div>
            <div class="note"><b>Step 3</b><br/>æ”¶å°¾å‰›å‰›å¥½ï¼ˆç¤ºæ„ï¼‰</div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="kicker">å¸¸è¦‹å•é¡Œ</div>
        <details>
          <summary>æˆ‘éœ€è¦è‡ªå‚™ä»€éº¼ï¼Ÿ</summary>
          <div class="accBody">ç¤ºæ„ï¼šæˆ‘å€‘æœƒé™„ä¸ŠåŸºæœ¬çƒ¤è‚‰é…ä»¶èˆ‡ç°¡æ˜“èªªæ˜ã€‚</div>
        </details>
        <details>
          <summary>å¤šä¹…æœƒå‡ºè²¨ï¼Ÿ</summary>
          <div class="accBody">ç¤ºæ„ï¼šä¾å…¬å‘Šå‡ºè²¨å€é–“å®‰æ’ï¼Œç¢ºä¿å‚™è²¨èˆ‡å“è³ªã€‚</div>
        </details>
        <details>
          <summary>å¯ä»¥æŒ‡å®šåˆ°è²¨æ—¥å—ï¼Ÿ</summary>
          <div class="accBody">ç¤ºæ„ï¼šå¯é¸æ“‡æŒ‡å®š/ä¸æŒ‡å®šï¼ˆè¦å‰‡ä»¥å®˜ç¶²å…¬å‘Šç‚ºæº–ï¼‰ã€‚</div>
        </details>
        <button class="btn btnWide" style="margin-top:10px;" id="goFaq2">æŸ¥çœ‹å®Œæ•´ FAQ</button>
      </div>
    `;
    el.appendChild(wrap);

    wrap.querySelector("#goShopFromBuy").onclick = ()=>go("/shop");

    const list = wrap.querySelector("#setList");
    list.innerHTML = state.sets.map(s => `
      <div class="section card setCard">
        <div class="pad">
          <div class="setTop">
            <div>
              <div class="setName">${s.name}</div>
              <div class="muted">é©åˆï¼š${s.best}</div>
            </div>
            <div class="price">${money(s.price)}</div>
          </div>
          <ul>${s.highlights.map(h=>`<li>${h}</li>`).join("")}</ul>
          <div class="btnRow">
            <button class="btn btnPrimary" data-add="${s.id}">åŠ å…¥è³¼ç‰©è»Š</button>
            <button class="btn" data-detail="${s.id}">çœ‹å…§å®¹</button>
          </div>
        </div>
      </div>
    `).join("");

    // Addon quick rows
    const addonQuick = wrap.querySelector("#addonQuick");
    addonQuick.innerHTML = `
      <div class="addonGrid">
        ${state.addons.map(a=>`
          <div class="addonItem">
            <div>
              <div class="addonName">${a.name}</div>
              <div class="addonMeta">${a.best}</div>
            </div>
            <div class="addonRight">
              <div class="addonPrice">${money(a.price)}</div>
              <button class="addonAdd primary" data-addon="${a.id}">ï¼‹ åŠ è³¼</button>
            </div>
          </div>
        `).join("")}
      </div>
      <div style="margin-top:10px;">
        <button class="btn btnWide" id="goShopMore">çœ‹æ›´å¤šï¼ˆå›åˆ°å…¨å•†å“ï¼‰</button>
      </div>
    `;

    list.querySelectorAll("[data-add]").forEach(btn=>{
      btn.onclick = ()=>{
        const id = btn.getAttribute("data-add");
        const item = state.sets.find(x=>x.id===id);
        if(item) addToCart(item);
      };
    });

    list.querySelectorAll("[data-detail]").forEach(btn=>{
      btn.onclick = ()=>{
        const id = btn.getAttribute("data-detail");
        go(`/product/${id}`);
      };
    });

    addonQuick.querySelectorAll("[data-addon]").forEach(btn=>{
      btn.onclick = ()=>{
        const id = btn.getAttribute("data-addon");
        const item = state.addons.find(x=>x.id===id);
        if(item) addToCart(item);
      };
    });

    wrap.querySelector("#goShopMore").onclick = ()=>go("/shop");
    wrap.querySelector("#goFaq2").onclick = ()=>go("/faq");
  }

  function pageOnsite(el){
    const wrap = document.createElement("div");
    wrap.className="page";
    wrap.innerHTML = `
      <div class="card">
        <div class="imgPh">ä¸»è¦–è¦º</div>
        <div class="pad">
          <div class="h1" style="margin:0 0 6px;">ä¾†å¹«æˆ‘çƒ¤ï½œä½ èŠå¤©ï¼Œæˆ‘ä¾†é¡§æµç¨‹</div>
          <div class="sub" style="margin:0;">ä»£çƒ¤ä¸èµ°è³¼ç‰©è»Šï¼šçœ‹å…§å®¹ â†’ ç”¨ LINE å…ˆç¢ºèª</div>
        </div>
      </div>

      <div class="section card">
        <div class="pad">
          <div class="kicker">å¿«é€Ÿç¢ºèªï¼ˆå»ºè­°å…ˆåšï¼‰</div>
          <div class="sub" style="margin:6px 0 10px;">
            å…ˆç¢ºèªæª”æœŸï¼å ´åœ°é™åˆ¶ï¼Œæˆ‘å€‘æœƒå›ä½ å¯è¡Œæ–¹æ¡ˆèˆ‡å»ºè­°ã€‚
          </div>
          <button class="btn btnPrimary btnWide" id="goLineHelp">ç”¨ LINE å¿«é€Ÿç¢ºèª</button>
          <div class="mini" style="margin-top:8px;">å‚™è¨»ï¼šä»£çƒ¤æ–¹æ¡ˆä¸åŠ å…¥è³¼ç‰©è»Šã€‚</div>
        </div>
      </div>

      <div class="section">
        <div class="kicker">ä»£çƒ¤æ–¹æ¡ˆï¼ˆçœ‹å…§å®¹ï¼‰</div>
        <div id="svcList"></div>
      </div>

      <div class="section card">
        <div class="pad">
          <div class="kicker">æœå‹™æµç¨‹ï¼ˆ4 æ­¥é©Ÿï¼‰</div>
          <div class="twoCol" style="margin-top:10px;">
            <div class="note"><b>Step 1</b><br/>LINE æå‡ºéœ€æ±‚</div>
            <div class="note"><b>Step 2</b><br/>ç¢ºèªå…§å®¹èˆ‡æª”æœŸ</div>
            <div class="note"><b>Step 3</b><br/>åˆ°å ´ä»£çƒ¤</div>
            <div class="note"><b>Step 4</b><br/>æ”¶å°¾å®Œæˆ</div>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="kicker">å¸¸è¦‹å•é¡Œ</div>
        <details>
          <summary>ä»£çƒ¤éœ€è¦æº–å‚™ä»€éº¼ï¼Ÿ</summary>
          <div class="accBody">ç¤ºæ„ï¼šå ´åœ°èˆ‡æ’åº§ï¼é®é›¨å³å¯ï¼Œå…¶é¤˜æˆ‘å€‘å”åŠ©ã€‚</div>
        </details>
        <details>
          <summary>ä¸‹é›¨æ€éº¼è¾¦ï¼Ÿ</summary>
          <div class="accBody">ç¤ºæ„ï¼šä¾å ´åœ°ç‹€æ³æä¾›æ›¿ä»£æ–¹æ¡ˆæˆ–èª¿æ•´ã€‚</div>
        </details>
      </div>
    `;
    el.appendChild(wrap);

    wrap.querySelector("#goLineHelp").onclick = ()=> window.open(LINE_URL, "_blank");

    const list = wrap.querySelector("#svcList");
    list.innerHTML = state.services.map(s => `
      <div class="section card setCard">
        <div class="pad">
          <div class="setTop">
            <div>
              <div class="setName">${s.name}</div>
              <div class="muted">é©åˆï¼š${s.best}</div>
            </div>
            <div class="price">${money(s.price)}</div>
          </div>
          <ul>${s.highlights.map(h=>`<li>${h}</li>`).join("")}</ul>
          <div class="btnRow">
            <button class="btn btnPrimary" data-line="${s.id}">ç”¨ LINE å…ˆç¢ºèª</button>
            <button class="btn" data-detail="${s.id}">çœ‹å…§å®¹</button>
          </div>
          <div class="mini">å‚™è¨»ï¼šä»£çƒ¤å…ˆç¢ºèªæª”æœŸï¼å ´åœ°ï¼Œå†å®‰æ’å…§å®¹ã€‚</div>
        </div>
      </div>
    `).join("");

    list.querySelectorAll("[data-detail]").forEach(btn=>{
      btn.onclick = ()=>{
        const id = btn.getAttribute("data-detail");
        go(`/product/${id}`);
      };
    });

    list.querySelectorAll("[data-line]").forEach(btn=>{
      btn.onclick = ()=> window.open(LINE_URL, "_blank");
    });
  }

  function pageShop(el){
    const wrap = document.createElement("div");
    wrap.className="page";
    wrap.innerHTML = `
      <div class="h1">ç€è¦½å…¨å•†å“</div>
      <div class="sub">æ–¹æ¡ˆï¼‹å–®é»éƒ½åœ¨é€™è£¡ï¼Œé¸å¥½å°±çµå¸³ã€‚</div>

      <div class="section card">
        <div class="pad">
          <div class="kicker">æˆ‘è‡ªå·±çƒ¤ï½œæ¨è–¦æ–¹æ¡ˆ</div>
          <div class="mini" style="margin-top:6px;">æƒ³çœå¿ƒå°±é¸å›ºå®šçµ„åˆï¼Œä¸ç”¨ç ”ç©¶æ€éº¼é…ã€‚</div>
        </div>
      </div>
      <div id="shopSets"></div>

      <div class="section card" style="margin-top:14px;">
        <div class="pad">
          <div class="kicker">å–®é»å“é …ï¼ˆåŠ è³¼ï¼‰</div>
          <div class="mini" style="margin-top:6px;">ç¼ºä»€éº¼è£œä»€éº¼ï¼Œç…§ä½ çš„ç¿’æ…£åŠ å°±å¥½ã€‚</div>
        </div>
      </div>
      <div id="shopAddons"></div>

      <div class="section card" style="margin-top:14px;">
        <div class="pad">
          <div class="kicker">ä¾†å¹«æˆ‘çƒ¤ï½œä»£çƒ¤æ–¹æ¡ˆ</div>
          <div class="mini" style="margin-top:6px;">ä»£çƒ¤ä¸é€²è³¼ç‰©è»Šï¼šçœ‹å…§å®¹ â†’ ç”¨ LINE å…ˆç¢ºèªã€‚</div>
        </div>
      </div>
      <div id="shopSvcs"></div>
    `;
    el.appendChild(wrap);

    const shopSets = wrap.querySelector("#shopSets");
    shopSets.innerHTML = state.sets.map(s => `
      <div class="section card setCard">
        <div class="pad">
          <div class="setTop">
            <div>
              <div class="setName">${s.name}</div>
              <div class="muted">é©åˆï¼š${s.best}</div>
            </div>
            <div class="price">${money(s.price)}</div>
          </div>
          <ul>${s.highlights.map(h=>`<li>${h}</li>`).join("")}</ul>
          <div class="btnRow">
            <button class="btn btnPrimary" data-add="${s.id}">åŠ å…¥è³¼ç‰©è»Š</button>
            <button class="btn" data-detail="${s.id}">çœ‹å…§å®¹</button>
          </div>
        </div>
      </div>
    `).join("");

    // Addons as quick rows (not as big set cards)
    const shopAddons = wrap.querySelector("#shopAddons");
    shopAddons.innerHTML = `
      <div class="addonGrid">
        ${state.addons.map(a=>`
          <div class="addonItem">
            <div>
              <div class="addonName">${a.name}</div>
              <div class="addonMeta">${a.best}</div>
            </div>
            <div class="addonRight">
              <div class="addonPrice">${money(a.price)}</div>
              <button class="addonAdd primary" data-addon="${a.id}">ï¼‹ åŠ è³¼</button>
            </div>
          </div>
        `).join("")}
      </div>
    `;

    const shopSvcs = wrap.querySelector("#shopSvcs");
    shopSvcs.innerHTML = state.services.map(s => `
      <div class="section card setCard">
        <div class="pad">
          <div class="setTop">
            <div>
              <div class="setName">${s.name}</div>
              <div class="muted">é©åˆï¼š${s.best}</div>
            </div>
            <div class="price">${money(s.price)}</div>
          </div>
          <ul>${s.highlights.map(h=>`<li>${h}</li>`).join("")}</ul>
          <div class="btnRow">
            <button class="btn btnPrimary" data-line="${s.id}">ç”¨ LINE å…ˆç¢ºèª</button>
            <button class="btn" data-detail="${s.id}">çœ‹å…§å®¹</button>
          </div>
          <div class="mini">å‚™è¨»ï¼šä»£çƒ¤ä¸èµ°è³¼ç‰©è»Šï¼Œé¿å…å¹²æ“¾çµå¸³ã€‚</div>
        </div>
      </div>
    `).join("");

    // bind: sets add
    wrap.querySelectorAll("[data-add]").forEach(btn=>{
      btn.onclick = ()=>{
        const id = btn.getAttribute("data-add");
        const item = state.sets.find(x=>x.id===id);
        if(item) addToCart(item);
      };
    });

    // bind: addons add
    wrap.querySelectorAll("[data-addon]").forEach(btn=>{
      btn.onclick = ()=>{
        const id = btn.getAttribute("data-addon");
        const item = state.addons.find(x=>x.id===id);
        if(item) addToCart(item);
      };
    });

    // bind: details (sets + services)
    wrap.querySelectorAll("[data-detail]").forEach(btn=>{
      btn.onclick = ()=>{
        const id = btn.getAttribute("data-detail");
        go(`/product/${id}`);
      };
    });

    // bind: services LINE
    wrap.querySelectorAll("[data-line]").forEach(btn=>{
      btn.onclick = ()=> window.open(LINE_URL, "_blank");
    });
  }

  function pageFAQ(el){
    const wrap = document.createElement("div");
    wrap.className="page";
    wrap.innerHTML = `
      <div class="h1">å¸¸è¦‹å•é¡Œ</div>
      <div class="sub">ä»¥åˆ†é¡ + æ‰‹é¢¨ç´ç‚ºä¸»ï¼ˆç¤ºæ„ï¼‰ã€‚</div>

      <div class="section">
        <div class="kicker">æˆ‘è‡ªå·±çƒ¤ / å–®é»åŠ è³¼</div>
        <details open><summary>å‡ºè²¨èˆ‡åˆ°è²¨æ€éº¼çœ‹ï¼Ÿ</summary><div class="accBody">ç¤ºæ„ï¼šä¾å…¬å‘Šå‡ºè²¨å€é–“å®‰æ’ï¼Œé¿å…æœ€å¾Œä¸€åˆ»æ‰å‚™è²¨ã€‚</div></details>
        <details><summary>é€€å†°ï¼ä¿å­˜æ€éº¼åšï¼Ÿ</summary><div class="accBody">ç¤ºæ„ï¼šæä¾›ç°¡æ˜“æŒ‡å¼•ï¼Œé™ä½å¤±æ•—ç‡ã€‚</div></details>
        <details><summary>è¦æ€éº¼çƒ¤æ‰ä¸å®¹æ˜“å¤±æ‰‹ï¼Ÿ</summary><div class="accBody">ç¤ºæ„ï¼šç”¨ã€Œé–‹ç®±é †åºã€å¼•å°ä½ ä¸€æ­¥æ­¥å®Œæˆã€‚</div></details>
      </div>

      <div class="section">
        <div class="kicker">ä¾†å¹«æˆ‘çƒ¤</div>
        <details><summary>æ€éº¼ç¢ºèªæª”æœŸï¼Ÿ</summary><div class="accBody">ç¤ºæ„ï¼šå…ˆç”¨ LINE æä¾›æ—¥æœŸã€åœ°é»ã€é ä¼°äººæ•¸èˆ‡å ´åœ°é™åˆ¶ã€‚</div></details>
        <details><summary>å ´åœ°é™åˆ¶æ€éº¼è™•ç†ï¼Ÿ</summary><div class="accBody">ç¤ºæ„ï¼šææ—©ç¢ºèªæ’åº§/å‹•ç·š/é®é›¨å³å¯ã€‚</div></details>
      </div>

      <div class="section note">
        <b>æµç¨‹åŸå‰‡</b><br/>
        é£Ÿæï¼ˆæ–¹æ¡ˆ/å–®é»ï¼‰èµ°ç«™å…§è³¼ç‰©è»Šèˆ‡çµå¸³ï¼›ä»£çƒ¤èµ° LINE å…ˆç¢ºèªã€‚
        <div style="margin-top:10px;">
          <button class="btn btnWide" id="goContact">å‰å¾€è¯çµ¡æ–¹å¼</button>
        </div>
      </div>
    `;
    el.appendChild(wrap);
    wrap.querySelector("#goContact").onclick = ()=>go("/contact");
  }

  function pageCart(el){
    const wrap = document.createElement("div");
    wrap.className="page";
    const items = state.cart;
    wrap.innerHTML = `
      <div class="h1">è³¼ç‰©è»Š</div>
      <div class="sub">ç¢ºèªå“é …ï¼èª¿æ•´æ•¸é‡ï¼å‰å¾€çµå¸³ã€‚</div>

      <div class="section card">
        <div class="pad" id="cartList"></div>
      </div>

      <div class="section card">
        <div class="pad">
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <div class="kicker">åˆè¨ˆ</div>
            <div style="font-weight:900; font-size:16px;">${money(cartTotal())}</div>
          </div>
          <div class="hr"></div>
          <button class="btn btnPrimary btnWide" id="goCheckout">å‰å¾€çµå¸³</button>
          <div class="mini" style="margin-top:10px;">æé†’ï¼šä»£çƒ¤ä¸åœ¨è³¼ç‰©è»Šå…§ï¼›è¦ä»£çƒ¤å…ˆç”¨ LINE ç¢ºèªã€‚</div>
        </div>
      </div>
    `;
    el.appendChild(wrap);

    const list = wrap.querySelector("#cartList");
    if(items.length===0){
      list.innerHTML = `<div class="muted">è³¼ç‰©è»Šç›®å‰æ²’æœ‰å•†å“ã€‚</div>
        <div style="margin-top:10px;"><button class="btn btnWide" id="goShop">å»ç€è¦½å…¨å•†å“</button></div>`;
      wrap.querySelector("#goShop").onclick = ()=>go("/shop");
      wrap.querySelector("#goCheckout").onclick = ()=>go("/checkout");
      wrap.querySelector("#goCheckout").disabled = true;
      return;
    }

    list.innerHTML = items.map(it=>`
      <div style="display:flex; justify-content:space-between; gap:10px; align-items:center; padding:10px 0; border-bottom:1px solid var(--line);">
        <div style="flex:1;">
          <div style="font-weight:800;">${it.name}</div>
          <div class="mini">${money(it.price)} â€¢ é¡å‹ï¼š${it.type}</div>
        </div>
        <div style="display:flex; align-items:center; gap:8px;">
          <button class="iconBtn" data-minus="${it.id}" aria-label="æ¸›å°‘">âˆ’</button>
          <div style="min-width:24px; text-align:center; font-weight:800;">${it.qty}</div>
          <button class="iconBtn" data-plus="${it.id}" aria-label="å¢åŠ ">ï¼‹</button>
        </div>
      </div>
    `).join("");

    list.querySelectorAll("[data-minus]").forEach(b=> b.onclick=()=>updateQty(b.getAttribute("data-minus"), -1));
    list.querySelectorAll("[data-plus]").forEach(b=> b.onclick=()=>updateQty(b.getAttribute("data-plus"), +1));

    wrap.querySelector("#goCheckout").onclick = ()=>go("/checkout");
  }

  function pageCheckout(el){
    const wrap = document.createElement("div");
    wrap.className="page";
    wrap.innerHTML = `
      <div class="h1">çµå¸³</div>
      <div class="sub">æœ€å°æ¬„ä½ç¤ºæ„ï¼ˆwireframeï¼‰ã€‚</div>

      <div class="section card">
        <div class="pad">
          <div class="kicker">è¨‚è³¼äººè³‡æ–™</div>
          <div class="field"><input placeholder="å§“å" /></div>
          <div class="field"><input placeholder="é›»è©±" /></div>
          <div class="field"><input placeholder="åœ°å€ / é…é€åœ°é»" /></div>
          <div class="kicker" style="margin-top:8px;">ä»˜æ¬¾æ–¹å¼</div>
          <div class="chips" style="margin-top:8px;">
            <span class="chip">é¸é …</span>
            <span class="chip">é¸é …</span>
            <span class="chip">é¸é …</span>
          </div>
          <div class="hr"></div>
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <div class="kicker">åˆè¨ˆ</div>
            <div style="font-weight:900; font-size:16px;">${money(cartTotal())}</div>
          </div>
          <button class="btn btnPrimary btnWide" style="margin-top:10px;" id="placeOrder">é€å‡ºè¨‚å–®</button>
          <div class="mini" style="margin-top:10px;">æé†’ï¼šä»£çƒ¤è«‹å¦ç”¨ LINE å…ˆç¢ºèªã€‚</div>
        </div>
      </div>
    `;
    el.appendChild(wrap);

    wrap.querySelector("#placeOrder").onclick = ()=>{
      if(state.cart.length===0){ toast("è³¼ç‰©è»Šæ˜¯ç©ºçš„"); return; }
      state.cart = [];
      toast("è¨‚å–®å·²é€å‡ºï¼ˆç¤ºæ„ï¼‰");
      go("/home");
      render();
    };
  }

  function pageProduct(el, params){
    const id = params.id;
    const item =
      state.sets.find(x=>x.id===id) ||
      state.addons.find(x=>x.id===id) ||
      state.services.find(x=>x.id===id);

    const wrap = document.createElement("div");
    wrap.className="page";

    if(!item){
      wrap.innerHTML = `<div class="h1">å•†å“é </div><div class="sub">æ‰¾ä¸åˆ°æ­¤å“é …ã€‚</div>`;
      el.appendChild(wrap);
      return;
    }

    const isService = item.type === "service";
    const subLabel = isService ? "ä»£çƒ¤æ–¹æ¡ˆå…§å®¹ï¼ˆä¸é€²è³¼ç‰©è»Šï¼‰" : "å•†å“é ï¼ˆSEO + è½‰æ›ï¼‰ç¤ºæ„ã€‚";

    wrap.innerHTML = `
      <div class="card">
        <div class="imgPh">å•†å“åœ–</div>
        <div class="pad">
          <div class="h1" style="margin:0 0 6px;">${item.name}</div>
          <div class="sub" style="margin:0;">${subLabel}</div>

          <div class="hr"></div>
          <div style="display:flex; justify-content:space-between; align-items:center;">
            <div class="kicker">åƒ¹æ ¼</div>
            <div style="font-weight:900;">${money(item.price)}</div>
          </div>

          <div class="hr"></div>
          <div class="kicker">é‡é»</div>
          <ul>${(item.highlights||["ç‰¹è‰²","ç‰¹è‰²","ç‰¹è‰²"]).map(h=>`<li>${h}</li>`).join("")}</ul>

          ${
            isService
              ? `
                <button class="btn btnPrimary btnWide" id="goLineHelp2">ç”¨ LINE å¿«é€Ÿç¢ºèª</button>
                <button class="btn btnWide" style="margin-top:10px;" id="goOnsite">å›åˆ°ä¾†å¹«æˆ‘çƒ¤</button>
                <div class="mini" style="margin-top:10px;">å‚™è¨»ï¼šä»£çƒ¤å…ˆç¢ºèªæª”æœŸï¼å ´åœ°ï¼Œé¿å…çµå¸³æµç¨‹è¢«æ‰“æ–·ã€‚</div>
              `
              : `
                <button class="btn btnPrimary btnWide" id="add">åŠ å…¥è³¼ç‰©è»Š</button>
                <button class="btn btnWide" style="margin-top:10px;" id="goShop">å›åˆ°å…¨å•†å“</button>
              `
          }
        </div>
      </div>

      <div class="section">
        <div class="kicker">å¸¸è¦‹å•é¡Œï¼ˆæ‘˜éŒ„ï¼‰</div>
        <details><summary>å•é¡Œ</summary><div class="accBody">å›ç­”ï¼ˆç¤ºæ„ï¼‰ã€‚</div></details>
        <details><summary>å•é¡Œ</summary><div class="accBody">å›ç­”ï¼ˆç¤ºæ„ï¼‰ã€‚</div></details>
      </div>
    `;
    el.appendChild(wrap);

    if(isService){
      wrap.querySelector("#goLineHelp2").onclick = ()=> window.open(LINE_URL, "_blank");
      wrap.querySelector("#goOnsite").onclick = ()=> go("/onsite-service");
    }else{
      wrap.querySelector("#add").onclick = ()=>addToCart(item);
      wrap.querySelector("#goShop").onclick = ()=>go("/shop");
    }
  }

  function pageAbout(el){
    const wrap = document.createElement("div");
    wrap.className="page";
    wrap.innerHTML = `
      <div class="h1">é—œæ–¼æˆ‘å€‘</div>
      <div class="sub">ä¿¡ä»»è³‡ç”¢é ï¼ˆçŸ­ç‰ˆç¤ºæ„ï¼‰ã€‚</div>
      <div class="section card"><div class="pad">å…§å®¹å€å¡Šï¼ˆå“ç‰Œæ•…äº‹ï¼å‡ºè²¨åˆ¶åº¦ï¼æœå‹™æ‰¿è«¾ï¼‰</div></div>
    `;
    el.appendChild(wrap);
  }

  function pageContact(el){
    const wrap = document.createElement("div");
    wrap.className="page";
    wrap.innerHTML = `
      <div class="h1">è¯çµ¡æ–¹å¼</div>
      <div class="sub">è¯çµ¡è³‡è¨Šï¼ˆä¸å¼·è¿«èŠå¤©ï¼‰ã€‚</div>
      <div class="section card">
        <div class="pad">
          <div class="kicker">è³‡è¨Š</div>
          <div class="note">é›»è©± / Email / åœ°å€ï¼ˆç¤ºæ„ï¼‰</div>
          <div class="hr"></div>
          <div class="kicker">ç¤¾ç¾¤</div>
          <div class="chips">
            <span class="chip">LINEï¼ˆä»£çƒ¤å…ˆç¢ºèªï¼‰</span>
            <span class="chip">Instagram</span>
            <span class="chip">Facebook</span>
          </div>
          <div class="mini" style="margin-top:10px;">æé†’ï¼šé£Ÿæèµ°ç«™å…§çµå¸³ï¼›ä»£çƒ¤èµ° LINE å…ˆç¢ºèªã€‚</div>
        </div>
      </div>
    `;
    el.appendChild(wrap);
  }

  // ---------- Search ----------
  function buildSearchIndex(){
    state.searchIndex = [
      ...state.sets.map(x=>({label:`æ–¹æ¡ˆï½œ${x.name}`, go:`/product/${x.id}`, keywords:["buy","set","æ–¹æ¡ˆ","è‡ªå·±çƒ¤","å…¥é–€","æ´¾å°","è±ªè¯", x.name.toLowerCase()]})),
      ...state.addons.map(x=>({label:`å–®é»ï½œ${x.name}`, go:`/product/${x.id}`, keywords:["addon","å–®é»","åŠ è³¼","é¦™è…¸","ç‰ç±³","è¦", x.name.toLowerCase()]})),
      ...state.services.map(x=>({label:`ä»£çƒ¤ï½œ${x.name}`, go:`/product/${x.id}`, keywords:["onsite","service","ä»£çƒ¤","åˆ°åºœä»£çƒ¤","æ–¹æ¡ˆ", x.name.toLowerCase()]})),
      { label:"æˆ‘è‡ªå·±çƒ¤ï½œLP", go:"/buy-yourself", keywords:["buy","yourself","lp","è‡ªå·±çƒ¤"] },
      { label:"ä¾†å¹«æˆ‘çƒ¤ï½œLP", go:"/onsite-service", keywords:["onsite","service","lp","ä»£çƒ¤","åˆ°åºœä»£çƒ¤"] },
      { label:"ç€è¦½å…¨å•†å“ï¼ˆå«å–®é»ï¼‰", go:"/shop", keywords:["shop","all","catalog","å…¨å•†å“","å–®é»","åŠ è³¼","é¸è³¼"] },
      { label:"å¸¸è¦‹å•é¡Œ", go:"/faq", keywords:["faq","question","å•é¡Œ"] },
      { label:"è³¼ç‰©è»Š", go:"/cart", keywords:["cart","checkout","è³¼ç‰©è»Š","çµå¸³"] },
    ];
  }

  // ---------- Header controls ----------
  function openDrawer(){
    drawer.classList.add("open");
    backdrop.classList.add("open");
  }
  function closeDrawer(){
    drawer.classList.remove("open");
    backdrop.classList.remove("open");
  }
  btnMenu.onclick = openDrawer;
  backdrop.onclick = closeDrawer;
  btnHome.onclick = ()=>go("/home");
  btnCart.onclick = ()=>go("/cart");

  drawer.addEventListener("click", (e)=>{
    const item = e.target.closest(".navItem");
    if(!item) return;
    const goTo = item.getAttribute("data-go");
    if(goTo) go(goTo.replace("#",""));
    closeDrawer();
  });

  // Search modal
  const searchModal = document.getElementById("searchModal");
  const modalBackdrop = document.getElementById("modalBackdrop");
  const searchInput = document.getElementById("searchInput");
  const searchResults = document.getElementById("searchResults");
  const searchClose = document.getElementById("searchClose");

  function openSearch(){
    searchModal.classList.add("open");
    modalBackdrop.classList.add("open");
    searchInput.value = "";
    renderSearch("");
    setTimeout(()=>searchInput.focus(), 50);
  }
  function closeSearch(){
    searchModal.classList.remove("open");
    modalBackdrop.classList.remove("open");
  }
  btnSearch.onclick = openSearch;
  searchClose.onclick = closeSearch;
  modalBackdrop.onclick = closeSearch;

  searchInput.addEventListener("input", ()=> renderSearch(searchInput.value));
  function renderSearch(q){
    const query = (q||"").trim().toLowerCase();
    const results = state.searchIndex
      .filter(r => query==="" ? false : r.keywords.some(k => k.includes(query)))
      .slice(0, 10);

    searchResults.innerHTML = results.length
      ? results.map(r=>`<div class="result" data-go="${r.go}">${r.label}</div>`).join("")
      : (query==="" ? `<div class="mini">è«‹è¼¸å…¥é—œéµå­—é–‹å§‹æœå°‹ã€‚</div>` : `<div class="mini">æ²’æœ‰ç¬¦åˆçš„çµæœã€‚</div>`);

    searchResults.querySelectorAll(".result").forEach(r=>{
      r.onclick = ()=>{
        closeSearch();
        go(r.getAttribute("data-go"));
      };
    });
  }

  // Cart badge
  function syncCartBadge(){
    const count = state.cart.reduce((s,x)=>s+x.qty,0);
    btnCart.title = `è³¼ç‰©è»Šï¼ˆ${count}ï¼‰`;
  }

  // ---------- Init ----------
  buildSearchIndex();
  window.addEventListener("hashchange", render);
  if(!location.hash) location.hash = "#/home";
  render();
</script>
</body>
</html>
